# Habit Tracker API

## О проекте

Habit Tracker — это бэкенд-часть SPA веб-приложения для трекера полезных привычек, вдохновленного книгой Джеймса Клира "Атомные привычки". Сервис позволяет пользователям создавать, отслеживать и получать напоминания о своих привычках через Telegram.

## Возможности

- Регистрация и аутентификация пользователей  
- CRUD операции с привычками  
- Валидация привычек по бизнес-правилам  
- Пагинация списка привычек  
- Публичные привычки для общего доступа  
- Интеграция с Telegram для напоминаний  
- Отложенные задачи через Celery  
- Автоматическая документация API

## Модели данных

### Пользователь (User)

- **Username** - уникальное имя пользователя (используется для входа)  
- **Email** - уникальный email адрес (обязательный при регистрации)  
- **Телефон** - опционально  
- **Аватар** - опционально, загружается в `avatars/`  
- **Telegram Chat ID** - для отправки уведомлений в Telegram

### Привычка (Habits)
- **Пользователь** - создатель привычки  
- **Место** - место выполнения  
- **Время** - время выполнения (формат HH:MM)  
- **Действие** - описание привычки  
- **Признак приятной привычки** - булево поле  
- **Связанная привычка** - приятная привычка для вознаграждения  
- **Периодичность** - дни между выполнениями (1-7)  
- **Вознаграждение** - текстовое описание награды  
- **Время на выполнение** - секунды (≤120)  
- **Признак публичности** - доступность другим пользователям

## Валидаторы

1. **Взаимоисключение**: нельзя одновременно указывать связанную привычку и вознаграждение  
2. **Время выполнения**: не более 120 секунд  
3. **Связанные привычки**: только приятные привычки  
4. **Приятные привычки**: не могут иметь вознаграждения или связанных привычек  
5. **Периодичность**: не реже 1 раза в 7 дней  

## Права доступа

- **Аутентифицированные пользователи**: полный CRUD для своих привычек  
- **Гости**: только просмотр публичных привычек  
- **Владельцы привычек**: полный доступ к своим данным  

## API Endpoints

### Аутентификация (без авторизации)
- `POST /api/token/` - Получение JWT токена  
- `POST /api/token/refresh/` - Обновление JWT токена  
- `POST /api/registr/` - Регистрация нового пользователя  

### Пользователи
- `GET /api/users/` - Список пользователей (требуется авторизация)  
- `GET /api/users/{id}/` - Детали пользователя (требуется авторизация)  

### Привычки (требуется авторизация)
- `GET /api/habits/` - Список привычек пользователя  
- `POST /api/habits/create/` - Создание новой привычки  
- `GET /api/habits/{id}/` - Детали привычки  
- `PUT /api/habits/{id}/update/` - Обновление привычки  
- `DELETE /api/habits/{id}/delete/` - Удаление привычки  

### Публичные привычки (доступно без авторизации)
- `GET /api/published-habits/` - Список публичных привычек  

## Telegram Интеграция

### Напоминания
- Автоматическая отправка в указанное время привычки  
- Формат: "Мне нужно [ДЕЙСТВИЕ] в [ВРЕМЯ] в [МЕСТО]"  
- Периодичность согласно настройкам привычки  

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone <repository-url>
cd habit_tracker